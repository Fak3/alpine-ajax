<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inline Edit | Alpine AJAX</title>
  <meta name="description" content="Alpine AJAX">
  <meta name="generator" content="Eleventy v2.0.0">
  <meta name="google-site-verification" content="KhOCyk8VyxCmepwpHn1DYq6uIPae0czI_8Z1atrRwJM">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prism-themes@1.9.0/themes/prism-a11y-dark.min.css">
  <link rel="stylesheet" href="/alpine-ajax/css/main.css?id=3">
  <script defer="" src="/alpine-ajax/js/main.js"></script>
  <style>
  #demo-server-info {
    position: fixed;
    bottom: 0;
    right: .5rem;
    left: .5rem;
    border-bottom-right-radius: 0;
    border-bottom-left-radius: 0;
    box-shadow: 0 10px 15px -3px var(--shadow), 0 4px 6px -4px var(--shadow);
    margin: 0;
  }

  #demo-canvas {
    margin-bottom: calc(40vh + 4rem);
    max-width: 100%;
    overflow-x: auto;
  }

  #demo-activity {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    height: 40vh;
    overflow: scroll;
  }

  #demo-activity> :first-child {
    flex-grow: 1;
  }

  #demo-activity> :last-child {
    flex-basis: 0;
    flex-grow: 999;
    min-inline-size: 50%;
    margin-top: .4rem;
  }

  #demo-activity [aria-current="step"] button {
    font-weight: 700;
  }

  #demo-activity dl>div:not(:first-child) dd::before {
    content: '';
  }

  #demo-activity dl>div:first-child {
    display: flex;
    gap: .4rem;
    align-items: center;
    margin-bottom: .4rem;
  }

  #demo-timeline button {
    padding: 0;
    border: none;
    background: transparent;
    color: var(--nc-lk-1);
    text-decoration: underline;
  }

  #demo-timeline button:hover,
  #demo-timeline button:focus {
    color: var(--nc-lk-2);
  }

</style>
  <script>
  function server(routes) {
    window.requestCount = 0
    window.fetch = async (url, options) => {
      url = url.replace(location.origin, '')
      let method = options.method.toUpperCase()
      console.log(method, url, options)
      let data = options.body || new FormData
      let params = new URLSearchParams(url.split('?')[1])
      let body = await Promise.resolve(routes[routeKey(method, url)](data, params))
      window.requestCount++
      logActivity(window.requestCount, method, url, formatData(data), body);
      return Promise.resolve({
        ok: true,
        url,
        text: () => Promise.resolve(body)
      })
    }

    function routeKey(method, url) {
      let name = url.split('?')[0]
      return `${method} ${name}`
    }

    function formatData(formData) {
      let params = {};
      formData.forEach((value, key) => {
        if (!params.hasOwnProperty(key)) {
          params[key] = value;
          return;
        }
        if (!Array.isArray(params[key])) {
          params[key] = [params[key]];
        }
        params[key].push(value);
      })

      return params
    }

    return {
      get: async (url) => {
        let content = await new Promise(resolve => resolve(routes[`GET ${url}`](new FormData, new URLSearchParams)))
        let canvas = document.getElementById("demo-canvas");
        if (canvas) {
          canvas.innerHTML = content;
        }
        window.requestCount++
        logActivity(window.requestCount, 'GET', url, {}, content);
      }
    }
  }

  function showTimelineEntry(id) {
    Array.from(document.getElementById("demo-current-request").children).forEach(child => {
      if (child.id == id) {
        child.removeAttribute('hidden');
      } else {
        child.setAttribute('hidden', true);
      }
    })
    Array.from(document.getElementById("demo-timeline").children).forEach(child => {
      if (child.id == id + "-link") {
        child.setAttribute('aria-current', 'step');
      } else {
        child.removeAttribute('aria-current');
      }
    })
  }

  function logActivity(id, method, url, params, body) {
    document.getElementById("request-count").innerHTML = window.requestCount
    document.getElementById("demo-timeline").insertAdjacentHTML("afterbegin", `<li id="${id}-link"><button onclick="showTimelineEntry('${id}')" style="cursor: pointer">${method} ${url}</a></li>`);
    let bodyDiv = `<dl id="${id}">
      <div><dt>Request</dt><dd>${method} ${url}</dd></div>
      <div><dt>Parameters</dt><dd><pre class="language-json"><code class="language-json">${JSON.stringify(params)}</code></pre></dd></div>
      <div><dt>Response</dt><dd><pre class="language-html"><code class="language-html">${escapeHtml(body)}</code></pre></dd></div>
    </dl>`;
    document.getElementById("demo-current-request").insertAdjacentHTML("afterbegin", bodyDiv);
    showTimelineEntry(id);
    // Prism.highlightAll();
  }

  function escapeHtml(string) {
    let pre = document.createElement('pre');
    let text = document.createTextNode(string);
    pre.appendChild(text);
    return pre.innerHTML;
  }
</script>
</head>

<body>
  <a href="#main">Skip to content</a>
  <div class="with-sidebar">
    <header>
      <nav aria-label="Site">
        <ul role="list">
          <li><a href="/alpine-ajax/" aria-current="">Alpine AJAX</a></li>
          <li>
            <a href="/alpine-ajax/reference" aria-current="">Reference</a>
            <ol>
              <li><a href="/alpine-ajax/reference/#installation" aria-current="">Installation</a></li>
              <li><a href="/alpine-ajax/reference/#usage" aria-current="">Usage</a></li>
              <li><a href="/alpine-ajax/reference/#x-ajax" aria-current="">x-ajax</a></li>
              <li><a href="/alpine-ajax/reference/#ajax" aria-current="">$ajax</a></li>
              <li><a href="/alpine-ajax/reference/#x-sync" aria-current="">x-sync</a></li>
              <li><a href="/alpine-ajax/reference/#x-load" aria-current="">x-load</a></li>
              <li><a href="/alpine-ajax/reference/#loading-states" aria-current="">Loading States</a></li>
            </ol>
          </li>
          <li><a href="/alpine-ajax/examples" aria-current="">Examples</a></li>
          <li><a href="/alpine-ajax/comparisons" aria-current="">Comparisons</a></li>
          <li><a href="https://github.com/imacrayon/alpine-ajax/releases">Changelog</a></li>
          <li><a href="https://github.com/imacrayon/alpine-ajax">GitHub</a></li>
        </ul>
      </nav>
    </header>
    <main id="main"><h1 id="inline-edit" tabindex="-1">Inline Edit <a class="direct-link" href="#inline-edit" aria-hidden="true">#</a></h1>

<p>The inline edit pattern provides a way to edit parts of a record without a page refresh.</p>
<p>This pattern starts with a UI that shows the details of a contact inside an AJAX Component assigned <code>id=&quot;contact_1&quot;</code>. The AJAX Component contains a link that will fetch the UI for editing a contact from <code>/contacts/1/edit</code>.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">x-ajax</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contact_1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>First Name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span>: Finn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>Last Name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span>: Mertens<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>Email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span>: fmertens@candykingdom.gov<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/contacts/1/edit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Edit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>This returns a form that can be used to edit the contact:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">x-ajax</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contact_1<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>put<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/contacts/1<span class="token punctuation">"</span></span> <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Contact Information<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>first_name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>First Name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>first_name<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>first_name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Finn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>last_name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Last Name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>last_name<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>last_name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Mertens<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fmertens@candykingdom.gov<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>Update<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/contacts/1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Cancel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre>
<p>When submitted, the form issues a <code>PUT</code> back to <code>/contacts/1</code>, following the usual REST-ful pattern.</p>
<script>
  let contact = {
    "first_name": "Finn",
    "last_name": "Mertens",
    "email": "fmertens@candykingdom.gov"
  };

  document.addEventListener('DOMContentLoaded', () => {
    window.server({
      'GET /contacts/1': () => show(contact),
      'GET /contacts/1/edit': () => edit(contact),
      'PUT /contacts/1': (formData) => {
        contact.first_name = formData.get('first_name');
        contact.last_name = formData.get('last_name');
        contact.email = formData.get('email');
        return show(contact);
      }
    }).get('/contacts/1')
  })

  function edit(contact) {
    return `<form x-ajax id="contact_1" method="put" action="/contacts/1" aria-label="Contact Information">
  <div>
    <label for="first_name">First Name</label>
    <input id="first_name" name="first_name" value="${contact.first_name}" style="width:18ch">
  </div>
  <div>
    <label for="last_name">Last Name</label>
    <input id="last_name" name="last_name" value="${contact.last_name}" style="width:18ch">
  </div>
  <div>
    <label for="email">Email</label>
    <input type="email" id="email" name="email" value="${contact.email}" style="width:22ch">
  </div>
  <button class="primary">Update</button>
  <a href="/contacts/1">Cancel</a>
</form>`
  }

  function show(contact) {
    return `<div x-ajax id="contact_1">
  <p><strong>First Name</strong>: ${contact.first_name}</p>
  <p><strong>Last Name</strong>: ${contact.last_name}</p>
  <p><strong>Email</strong>: ${contact.email}</p>
  <a href="/contacts/1/edit">Edit</a>
</div>`;
  }
</script>

<h2 id="demo" tabindex="-1">Demo <a class="direct-link" href="#demo" aria-hidden="true">#</a></h2>

<noscript>
  <strong>This demo would normally function without JavaScript enabled</strong>. However, this website is static and
  mocks HTTP responses using JavaScript instead of interacting with a real server, so you will need to enable
  JavaScript to view this demo.
</noscript>
<div id="demo-canvas"></div>
<details id="demo-server-info">
  <summary>Server Requests (<span id="request-count"></span>)</summary>
  <div id="demo-activity">
    <div>
      <ol id="demo-timeline" reversed="">
      </ol>
    </div>
    <div id="demo-current-request">
    </div>
  </div>
</details>




</main>
  </div>



</body>
</html>