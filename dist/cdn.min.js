(()=>{var w={headers:{},followRedirects:!0,mergeStrategy:"replace",transitions:!1},M=(e,t)=>{console.error(`You can't use the "morph" merge without first installing the Alpine "morph" plugin here: https://alpinejs.dev/plugins/morph`)};function d(){console.debug(...arguments)}function A(e){e.morph&&(M=e.morph),e.directive("target",(r,{value:i,modifiers:a,expression:u},{evaluateLater:s,effect:n})=>{let h=o=>{d("[x-target]",r),c.set(r,{targets:C(r,o),focus:!a.includes("nofocus"),history:a.includes("push")?"push":a.includes("replace")?"replace":!1,follow:w.followRedirects?!a.includes("nofollow"):a.includes("follow")})};if(i==="dynamic"){let o=s(u);n(()=>o(h))}else h(u)}),e.directive("headers",(r,{expression:i},{evaluateLater:a,effect:u})=>{let s=a(i||"{}");u(()=>{s(n=>{d("[x-headers]",r),c.set(r,{headers:n})})})}),e.addInitSelector(()=>`[${e.prefixed("merge")}]`),e.directive("merge",(r,{value:i,modifiers:a,expression:u},{evaluateLater:s,effect:n})=>{let h=o=>{d("[x-merge]",r),c.set(r,{strategy:o||w.mergeStrategy,transition:w.transitions||a.includes("transition")})};if(i==="dynamic"){let o=s(u);n(()=>o(h))}else h(u)}),e.magic("ajax",r=>async(i,a={})=>{let u=T(C(r,a.targets||a.target));u=a.sync?D(u):u;let s=L(r),n=Object.assign({},w.headers,a.headers||{}),h=a.method?a.method.toUpperCase():"GET",o=a.body,f="followRedirects"in a?a.followRedirects:w.followRedirects,m=await v(r,u,i,s,n,f,h,o),g=a.history||c.get(r,"history"),l="focus"in a?a.focus:c.get(r,"focus",!0);return R(m,r,u,g,l)});let t=[];e.ajax={start(){t.length||(t.push(I("submit",P)),t.push(I("click",N)))},stop(){t.forEach(r=>r()),t=[]}},e.ajax.start()}A.configure=e=>(w=Object.assign(w,e),A);var F=A,c={store:new WeakMap,set(e,t){this.store.has(e)?this.store.set(e,Object.assign(this.store.get(e),t)):this.store.set(e,t)},get(e,t,r=null){let i=this.store.get(e)||{};return t in i?i[t]:r},has(e){return this.store.has(e)}};async function N(e){if(e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey){d("Abort: Insignificant click event");return}let t=e?.target.closest("a[href]:not([download]):not([noajax])");if(!t&&!d('Abort: Failed selector "a[href]:not([download]):not([noajax])"')||!c.has(t)&&!d("Abort: No [x-target] data")||t.isContentEditable&&!d("Abort: Has [contenteditable]")||t.getAttribute("href").startsWith("#")&&!d('Abort: [href] starts with "#"')||t.origin!==location.origin&&!d("Abort: Not same origin")||t.pathname+t.search===location.pathname+location.search&&t.hash&&!d("Abort: Anchor only"))return;d("Link is good!"),e.preventDefault(),e.stopImmediatePropagation();let r=D(T(c.get(t,"targets",[]))),i=L(t),a=t.getAttribute("href")||i,u=c.get(t,"headers",{}),s=c.get(t,"follow",w.followRedirects),n=await v(t,r,a,i,u,s),h=c.get(t,"history"),o=c.get(t,"focus",!0);try{return await R(n,t,r,h,o)}catch(f){if(f.name==="RenderError"){console.warn(f.message),window.location.href=t.href;return}throw f}}async function P(e){if(e.defaultPrevented)return;let t=e.target,r=e.submitter,i=(r?.getAttribute("formmethod")||t.getAttribute("method")||"GET").toUpperCase();if(!t||!c.has(t)||i==="DIALOG"||r?.hasAttribute("formnoajax")||r?.hasAttribute("formtarget")||t.hasAttribute("noajax")||t.hasAttribute("target"))return;e.preventDefault(),e.stopImmediatePropagation();let a=D(T(c.get(t,"targets",[]))),u=L(t),s=t.getAttribute("action")||u,n=c.get(t,"headers",{}),h=c.get(t,"follow",w.followRedirects),o=new FormData(t),f=t.getAttribute("enctype");r&&(f=r.getAttribute("formenctype")||f,s=r.getAttribute("formaction")||s,r.name&&o.append(r.name,r.value));let m=await G(r,()=>v(t,a,s,u,n,h,i,o,f)),g=c.get(t,"history"),l=c.get(t,"focus",!0);try{return await R(m,t,a,g,l)}catch(p){if(p.name==="RenderError"){console.warn(p.message),t.setAttribute("noajax","true"),t.requestSubmit(r);return}throw p}}function I(e,t){let r=async a=>{try{await t(a)}catch(u){if(u.name==="AbortError")return;throw u}},i=()=>{d(`Event: "${e}" captured`),document.removeEventListener(e,r,!1),document.addEventListener(e,r,!1)};return document.addEventListener(e,i,!0),()=>document.removeEventListener(e,i,!0)}async function G(e,t){if(!e)return await t();let r=a=>a.preventDefault();e.setAttribute("aria-disabled","true"),e.addEventListener("click",r);let i=await t();return e.removeAttribute("aria-disabled"),e.removeEventListener("click",r),i}var H={store:new Map,abort(e){if(this.store.has(e)){let t=this.store.get(e);t.controller.abort(),t.target.removeAttribute("aria-busy")}},set(e,t,r){this.abort(e),t.querySelectorAll("[aria-busy]").forEach(i=>this.abort(i.getAttribute("id"))),this.store.set(e,{target:t,controller:r}),t.setAttribute("aria-busy","true")}},y=new Map;async function v(e,t,r,i,a,u,s="GET",n=null,h="application/x-www-form-urlencoded"){if(!b(e,"ajax:before"))throw d("Request cancelled"),new DOMException("[ajax:before] aborted","AbortError");d("Requesting",arguments);let o=new AbortController,f=[];t.forEach(l=>{let p=l.getAttribute("id");H.set(p,l,o),f.push(p)});let m;s==="GET"&&y.has(r)?m=y.get(r):(a["X-Alpine-Target"]=f.join("  "),a["X-Alpine-Request"]="true",a=Object.assign({},w.headers,a),n&&(n=$(n),s==="GET"?(r=U(n,r),n=null):h!=="multipart/form-data"&&(n=O(n))),m=fetch(r,{method:s,headers:a,body:n,referrer:i,signal:o.signal}).then(l=>(!u&&l.redirected&&(window.location.href=l.url),l)).then(async l=>(l.html=await l.text(),l)),y.set(r,m));let g=await m;return y.delete(r),g.ok?b(e,"ajax:success",g):b(e,"ajax:error",g),b(e,"ajax:after",g),g}function $(e){if(e instanceof FormData)return e;if(e instanceof HTMLFormElement)return new FormData(e);let t=new FormData;for(let r in e)typeof e[r]=="object"?t.append(r,JSON.stringify(e[r])):t.append(r,e[r]);return t}function U(e,t){return t=new URL(t,document.baseURI),t.search=O(e).toString(),t.toString()}function O(e){let t=Array.from(e.entries()).filter(([r,i])=>!(i instanceof File));return new URLSearchParams(t)}async function R(e,t,r,i,a){if(!e.html){d("No HTML in response"),r.forEach(o=>o.removeAttribute("aria-busy"));return}d("Rendering",arguments),i&&K(i,e.url);let s=document.createRange().createContextualFragment("<template>"+e.html+"</template>").firstElementChild.content,n=!a,h=r.map(async o=>{let f=s.getElementById(o.getAttribute("id")),m=c.get(o,"strategy",w.mergeStrategy);if(!f){if(!b(t,"ajax:missing",{target:o,response:e}))return;if(e.ok)return o.remove();throw new j(o,e.status)}let g=async()=>{let l=await B(m,o,f);return l&&(l.dataset.source=e.url,l.removeAttribute("aria-busy"),["[x-autofocus]","[autofocus]"].some(S=>n?!0:(l.matches(S)&&(n=k(l)),n||Array.from(l.querySelectorAll(S)).some(q=>k(q))))),b(l,"ajax:merged"),l};if(b(o,"ajax:merge",{strategy:m,content:f,merge:g}))return g()});return await Promise.all(h)}async function B(e,t,r){let i={before(s,n){return s.before(...n.childNodes),s},replace(s,n){return s.replaceWith(n),n},update(s,n){return s.replaceChildren(...n.childNodes),s},prepend(s,n){return s.prepend(...n.childNodes),s},append(s,n){return s.append(...n.childNodes),s},after(s,n){return s.after(...n.childNodes),s},morph(s,n){return M(s,n),document.getElementById(n.getAttribute("id"))}};if(!c.get(t,"transition")||!document.startViewTransition)return i[e](t,r);let a=null;return await document.startViewTransition(()=>(a=i[e](t,r),Promise.resolve())).updateCallbackDone,a}function k(e){return!e||!e.getClientRects().length?!1:(setTimeout(()=>{e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.focus()},0),!0)}function K(e,t){return{push:()=>window.history.pushState({__ajax:!0},"",t),replace:()=>window.history.replaceState({__ajax:!0},"",t)}[e]()}function C(e,t=null){let r=[e.getAttribute("id")];if(t&&(r=Array.isArray(t)?t:t.split(" ")),r=r.filter(i=>i),r.length===0)throw new x(e);return r}function T(e=[]){return e.map(t=>{let r=document.getElementById(t);if(!r)throw new E(t);return r})}function D(e){return document.querySelectorAll("[x-sync]").forEach(t=>{let r=t.getAttribute("id");if(!r)throw new IdNotFoundError(t);e.some(i=>i.getAttribute("id")===r)||e.push(t)}),e}function L(e){return e.closest("[data-source]")?.dataset.source||window.location.href}function b(e,t,r){return e.dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0,cancelable:!0}))}var x=class extends DOMException{constructor(t){let r=(t.outerHTML.match(/<[^>]+>/)??[])[0]??"[Element]";super(`${r} is missing an ID to target.`,"IDError")}},E=class extends DOMException{constructor(t){super(`[#${t}] was not found in the current document.`,"TargetError")}},j=class extends DOMException{constructor(t,r){let i=t.getAttribute("id");super(`Target [#${i}] was not found in response with status [${r}].`,"RenderError")}};document.addEventListener("alpine:initializing",()=>{F(window.Alpine)});})();
