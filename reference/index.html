<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alpine AJAX</title>
  <meta name="description" content="Alpine AJAX">
  <meta name="generator" content="Eleventy v2.0.0">
  <link rel="stylesheet" href="https://unpkg.com/@exampledev/new.css@1.1.3/new.css">
  <link rel="stylesheet" href="https://unpkg.com/prism-themes@1.9.0/themes/prism-a11y-dark.min.css">
  <link rel="stylesheet" href="/alpine-ajax/css/main.css">
  <script>!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e;e=null,document.addEventListener("click",(function(t){t.target.closest&&(e=t.target.closest("button, input[type=submit]"))}),!0),document.addEventListener("submit",(function(t){if(!("submitter"in t)){var n=[document.activeElement,e];e=null;for(var r=0;r<n.length;r++){var i=n[r];if(i&&i.form&&i.matches("button, input[type=button], input[type=image]"))return void(t.submitter=i)}t.submitter=t.target.querySelector("button, input[type=button], input[type=image]")}}),!0);class t{el=void 0;constructor(e){this.el=e}traversals={first:"firstElementChild",next:"nextElementSibling",parent:"parentElement"};nodes(){return this.traversals={first:"firstChild",next:"nextSibling",parent:"parentNode"},this}first(){return this.teleportTo(this.el[this.traversals.first])}next(){return this.teleportTo(this.teleportBack(this.el[this.traversals.next]))}before(e){return this.el[this.traversals.parent].insertBefore(e,this.el),e}replace(e){return this.el[this.traversals.parent].replaceChild(e,this.el),e}append(e){return this.el.appendChild(e),e}teleportTo(e){return e&&e._x_teleport?e._x_teleport:e}teleportBack(e){return e&&e._x_teleportBack?e._x_teleportBack:e}}function n(e){return new t(e)}let r=()=>{},i=()=>{};async function a(e,t,a){let l,u,s,d,c,f,p,m,h,w,v;function b(e){if(v)return i((e||"").replace("\n","\\n"),l,u),new Promise((e=>r=()=>e()))}async function x(e,t){if(function(e,t){return e.nodeType!=t.nodeType||e.nodeName!=t.nodeName||y(e)!=y(t)}(e,t)){let r=function(e,t){if(o(p,e))return;let r=t.cloneNode(!0);if(o(h,r))return;n(e).replace(r),m(e),w(r)}(e,t);return await b("Swap elements"),r}let r=!1;if(!o(c,e,t,(()=>r=!0))){if(window.Alpine&&function(e,t,n){if(1!==e.nodeType)return;e._x_dataStack&&window.Alpine.clone(e,t)}(e,t),3===(i=t).nodeType||8===i.nodeType)return await async function(e,t){let n=t.nodeValue;e.nodeValue!==n&&(e.nodeValue=n,await b("Change text node to: "+n))}(e,t),void f(e,t);var i;r||await async function(e,t){if(e._x_isShown&&!t._x_isShown)return;if(!e._x_isShown&&t._x_isShown)return;let n=Array.from(e.attributes),r=Array.from(t.attributes);for(let r=n.length-1;r>=0;r--){let i=n[r].name;t.hasAttribute(i)||(e.removeAttribute(i),await b("Remove attribute"))}for(let t=r.length-1;t>=0;t--){let n=r[t].name,i=r[t].value;e.getAttribute(n)!==i&&(e.setAttribute(n,i),await b(`Set [${n}] attribute to: "${i}"`))}}(e,t),f(e,t),await async function(e,t){let r=e.childNodes;g(t.childNodes);let i=g(r),a=n(t).nodes().first(),l=n(e).nodes().first(),u={};for(;a;){let t=y(a),r=y(l);if(!l){if(!t||!u[t]){let t=E(a,e)||{};await b("Add element: "+(t.outerHTML||t.nodeValue)),a=n(a).nodes().next();continue}{let r=u[t];n(e).append(r),l=r,await b("Add element (from key)")}}if(d){let e=n(a).next(),t=!1;for(;!t&&e;)l.isEqualNode(e)&&(t=!0,l=A(a,l),r=y(l),await b("Move element (lookahead)")),e=n(e).next()}if(t!==r){if(!t&&r){u[r]=l,l=A(a,l),u[r].remove(),l=n(l).nodes().next(),a=n(a).nodes().next(),await b('No "to" key');continue}if(t&&!r&&i[t]&&(l=n(l).replace(i[t]),await b('No "from" key')),t&&r){u[r]=l;let e=i[t];if(!e){u[r]=l,l=A(a,l),u[r].remove(),l=n(l).next(),a=n(a).next(),await b("Swap elements with keys");continue}l=n(l).replace(e),await b('Move "from" key')}}let o=l&&n(l).nodes().next();await x(l,a),a=a&&n(a).nodes().next(),l=o}let s=[];for(;l;)o(p,l)||s.push(l),l=n(l).nodes().next();for(;s.length;){let e=s.shift();e.remove(),await b("remove el"),m(e)}}(e,t)}}function y(e){return e&&1===e.nodeType&&s(e)}function g(e){let t={};return e.forEach((e=>{let n=y(e);n&&(t[n]=e)})),t}function E(e,t){if(!o(h,e)){let r=e.cloneNode(!0);return n(t).append(r),w(r),r}return null}function A(e,t){if(!o(h,e)){let r=e.cloneNode(!0);return n(t).before(r),w(r),r}return t}return function(e={}){let t=()=>{};c=e.updating||t,f=e.updated||t,p=e.removing||t,m=e.removed||t,h=e.adding||t,w=e.added||t,s=e.key||(e=>e.getAttribute("key")),d=e.lookahead||!1,v=e.debug||!1}(a),l=e,u=function(e){const t=document.createElement("template");return t.innerHTML=e,t.content.firstElementChild}(t),window.Alpine&&window.Alpine.closestDataStack&&!e._x_dataStack&&(u._x_dataStack=window.Alpine.closestDataStack(e),u._x_dataStack&&window.Alpine.clone(e,u)),await b(),await x(e,u),l=void 0,u=void 0,e}function o(e,...t){let n=!1;return e(...t,(()=>n=!0)),n}function l(e){e.directive("ajax",((e,{},{cleanup:t})=>{u(e);let n=function(e){let t=t=>{var n;let r=t.target;if(d(r))return;t.preventDefault(),t.stopPropagation();let i=(r.getAttribute("method")||"GET").toUpperCase(),a=r.getAttribute("action")||window.location.href,o=new FormData(r);null!=t&&null!==(n=t.submitter)&&void 0!==n&&n.name&&o.append(t.submitter.name,t.submitter.value),f(e,r,i,a,o)};return e.addEventListener("submit",t),()=>e.removeEventListener("submit",t)}(e),r=function(e){let t=t=>{let n=t.target,r=n.dataset.action;r&&(t.preventDefault(),t.stopPropagation(),f(e,n,"GET",r,null))};return e.addEventListener("click",t),()=>e.removeEventListener("click",t)}(e);t((()=>{n(),r()}))})),e.directive("load",((e,{value:t,modifiers:n,expression:r},{cleanup:i})=>{if(!t&&!e.dataset.source)return p(e,"GET",r);if(!t&&n.length){let t=n[0].split("ms")[0];setTimeout((()=>p(e,"GET",r)),t)}let a=function(e,t,n){let r=()=>p(e,"GET",n);return window.addEventListener(t,r),()=>window.removeEventListener(t,r)}(e,t,r);i((()=>{a()}))}))}function u(e){if(!e.hasAttribute("data-action"))return s(e)?c(e):void e.querySelectorAll("[href]:not([noajax]):not([data-action])").forEach((e=>{s(e)&&!d(e)&&c(e)}))}function s(e){return"A"===e.tagName&&e.getAttribute("href")&&0!==e.getAttribute("href").indexOf("#")&&e.hostname===location.hostname}function d(e){return e.closest("[x-ajax],[noajax]").hasAttribute("noajax")}function c(e){e.setAttribute("role","button"),e.dataset.action=e.getAttribute("href"),e.tabIndex=0,e.removeAttribute("href"),e.addEventListener("keydown",(e=>32===e.keyCode&&e.target.click()))}async function f(e,t,n,r,i=null){let a=await m(t,n,r,i);if(!a.body)return;let o=t.closest("[x-target]");w(new Set(o?o.getAttribute("x-target").split(" ").filter((e=>e)):[e.id]),a.body,a.url)}async function p(e,t,n){let r=await m(e,t,n);r.body&&w(new Set([e.id]),r.body,r.url,!1)}async function m(e,t,n,r=null){var i;if(!h(e,"ajax:before"))return!1;if("GET"===t&&r){let e=Array.from(r.entries()).filter((([e,t])=>""!==t||null!==t));if(e.length){let t=n.split("#");(n=t[0]).includes("?")?n+="&":n+="?",n+=new URLSearchParams(e);let r=t[1];r&&(n+="#"+r)}r=null}let a=null===(i=e.closest("[data-source]"))||void 0===i?void 0:i.dataset.source;try{let i=await fetch(n,{headers:{"X-Alpine-Request":"true"},referrer:a,method:t,body:r});if(!i.ok){let e=new Error("Network response was not OK.");throw e.response=i,e}return h(e,"ajax:success",i),h(e,"ajax:after",i),{url:i.url,body:await i.text()}}catch(t){let n=t.response;if(!n)throw t;return h(e,"ajax:error",n),h(e,"ajax:after",n),{url:n.url,body:await n.text()}}}function h(e,t,n={}){return e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,composed:!0,cancelable:!0}))}function w(e,t,n,r=!0){r&&document.querySelectorAll("[x-sync]").forEach((t=>{t.id&&e.add(t.id)}));let i=function(e){return document.createRange().createContextualFragment(e)}(t);e.forEach((async e=>{let t=i.getElementById(e);t&&(t.dataset.source=n,await a(document.getElementById(e),t.outerHTML),u(document.getElementById(e)))}))}a.step=()=>r(),a.log=e=>{i=e},document.addEventListener("alpine:initializing",(()=>{l(window.Alpine)}))}));
</script>
  <script defer="" src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style></style>
  <script></script>
</head>

<body>
  <a href="#main">Skip to content</a>
  <header>
    <a href="/alpine-ajax/" aria-current="">Alpine Ajax</a>
    <nav aria-label="Site">
      <ul role="list">
        <a href="/alpine-ajax/reference" aria-current="page">Reference</a>
        <a href="/alpine-ajax/examples" aria-current="">Examples</a>
        <a href="https://github.com/imacrayon/alpine-ajax">GitHub</a>
      </ul>
    </nav>
  </header>
  <main id="main"><h1 id="reference" tabindex="-1">Reference <a class="direct-link" href="#reference" aria-hidden="true">#</a></h1>
<ol>
<li><a href="#x-ajax">x-ajax</a>
<ul>
<li><a href="#noajax">noajax</a></li>
<li><a href="#ajax-events">AJAX Events</a></li>
<li><a href="#progressive-enhancement">Progressive Enhancement</a></li>
</ul>
</li>
<li><a href="#x-target">x-target</a></li>
<li><a href="#x-sync">x-sync</a></li>
<li><a href="#x-load">x-load</a></li>
</ol>
<h2 id="x-ajax" tabindex="-1">x-ajax <a class="direct-link" href="#x-ajax" aria-hidden="true">#</a></h2>
<p>This directive defines parts of a page to be updated on request. Any links and forms inside this element are captured, and the <code>x-ajax</code> element is automatically replaced after receiving a response. Regardless of whether the server provides a full document, or just a HTML fragment, only the <code>x-ajax</code> element will be extracted from the response to replace the existing content.</p>
<p><code>x-ajax</code> elements must have a unique <code>id</code>. The <code>id</code> is used to match the content being replaced when requesting content from the server.</p>
<p>Consider this contact list entry:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">x-data</span> <span class="token attr-name">x-ajax</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contact_1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>First Name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span>: Finn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>Last Name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span>: Mertens<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>Email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span>: fmertens@candykingdom.gov<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/contacts/1/edit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Edit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>When the &quot;Edit&quot; link is clicked, the response should return a page for editing the contact entry:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Edit Contact Details<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">x-data</span> <span class="token attr-name">x-ajax</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contact_1<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>put<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/contacts/1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>first_name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>First Name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>first_name<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>first_name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Finn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>last_name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Last Name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>last_name<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>last_name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Mertens<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fmertens@candykingdom.gov<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>Update<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre>
<p>Since the <code>&lt;form&gt;</code> in this response has a matching <code>contact_1</code> id. The original contact details will be replaced with the edit form. Notice that the page's <code>&lt;h1&gt;</code> isn't inside the <code>&lt;form&gt;</code>. This means it'll be ignored when the form replaces the contact details.</p>
<h3 id="noajax" tabindex="-1">noajax <a class="direct-link" href="#noajax" aria-hidden="true">#</a></h3>
<p>You can stop AJAX behavior on any element by adding the <code>noajax</code> attribute. Just like <code>x-ajax</code>, <code>noajax</code> is inherited by child elements.</p>
<p>Review this navigation that demonstrates <code>noajax</code> at work:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">x-data</span> <span class="token attr-name">x-ajax</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sidebar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">noajax</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/page-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Disabled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">noajax</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/page-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Disabled by parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/page-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>AJAX enabled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span></code></pre>
<p>The first two links will behave like regular links, causing a full page reload when clicked. Only the third link will issue an AJAX request.</p>
<h3 id="ajax-events" tabindex="-1">AJAX Events <a class="direct-link" href="#ajax-events" aria-hidden="true">#</a></h3>
<p>You can listen for AJAX events to perform additional actions during an AJAX request:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ajax:before</td>
<td>Fired before the request is made. If this event is cancelled using <code>$event.preventDefault()</code> the request will be aborted.</td>
</tr>
<tr>
<td>ajax:success</td>
<td>Fired when a network request completes. <code>detail</code> contains the server response data.</td>
</tr>
<tr>
<td>ajax:error</td>
<td>Fired on a configuration or network error. <code>detail</code> contains the server response data.</td>
</tr>
<tr>
<td>ajax:after</td>
<td>Fired after both successful and unsuccessful requests.</td>
</tr>
</tbody>
</table>
<p>Here's an example of aborting a form request when the user cancels a dialog prompt:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">x-data</span> <span class="token attr-name">x-ajax</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>delete_user<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">@ajax:</span>before</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>confirm('Are you sure?') || $event.preventDefault()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>Delete User<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre>
<p>Here's an example of notifying the user that there were errors when submitting a form:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">x-data</span> <span class="token attr-name">x-ajax</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>edit_email<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">@ajax:</span>error</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>alert('The email your entered is invalid.')<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>Update<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre>
<h3 id="progressive-enhancement" tabindex="-1">Progressive Enhancement <a class="direct-link" href="#progressive-enhancement" aria-hidden="true">#</a></h3>
<p>Since AJAX enabled links no longer trigger full page navigation, they are transformed into buttons to meet <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/button_role#best_practices">accessibility best practices</a>. AJAX links are given the <code>button</code> role, their <code>href</code> is removed, and the <code>&lt;a&gt;</code> element is wired to respond to button keyboard events.</p>
<p>Behavior added with <code>x-ajax</code> degrades gracefully if JavaScript is not enabled: Links and forms continue to work as normal, they simply don't fire AJAX requests. This is known as <a href="https://developer.mozilla.org/en-US/docs/Glossary/Progressive_Enhancement">Progressive Enhancement</a>, and it allows a wider audience to use your sites functionality.</p>
<h2 id="x-target" tabindex="-1">x-target <a class="direct-link" href="#x-target" aria-hidden="true">#</a></h2>
<p>Use this directive to target another element <code>id</code> on the page to be replaced instead of the <code>x-ajax</code> element.</p>
<p>Take a look at this comment list:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comments<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>Comment #1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment_form_title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Post a Comment<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">x-data</span> <span class="token attr-name">x-ajax</span> <span class="token attr-name">x-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comments<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/comment<span class="token punctuation">"</span></span> <span class="token attr-name">aria-labelledby</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment_form_title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Comment text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>Submit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre>
<p>When the &quot;Post a Comment&quot; form is submitted the <code>comments</code> list will be updated with the response instead of the <code>x-ajax</code> form.</p>
<h3 id="defining-mutiple-targets" tabindex="-1">Defining Mutiple Targets <a class="direct-link" href="#defining-mutiple-targets" aria-hidden="true">#</a></h3>
<p>You can even replace multiple elements from the same server response by separating <code>id</code>s with a space.</p>
<p>Here's an expanded comment list example:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>Comments (<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comments_count<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comments<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>Comment #1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment_form_title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Post a Comment<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">x-data</span> <span class="token attr-name">x-ajax</span> <span class="token attr-name">x-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comments comments_count<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/comment<span class="token punctuation">"</span></span> <span class="token attr-name">aria-labelledby</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment_form_title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment<span class="token punctuation">"</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>Submit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre>
<p>Now, when the form is submitted, both the <code>comments</code> list, and the <code>comments_count</code> indicator will be updated.</p>
<h2 id="x-sync" tabindex="-1">x-sync <a class="direct-link" href="#x-sync" aria-hidden="true">#</a></h2>
<p>Elements with the <code>x-sync</code> attribute are updated whenever the server sends a matching element, even if the element isn't targeted with <code>x-target</code>.</p>
<p><code>x-sync</code> elements must have a unique <code>id</code>. The <code>id</code> is used to match the content being replaced when requesting content from the server.</p>
<p>Use cases for this are unread message counters or notification flashes. These elements often live in the base layout, outside of the content area that is being replaced.</p>
<p>Consider this list of notifications:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">aria-live</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>polite<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">x-sync</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>notifications<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>Every server response that includes a <code>notifications</code> element will get inserted into this <code>aria-live</code> region.</p>
<h2 id="x-load" tabindex="-1">x-load <a class="direct-link" href="#x-load" aria-hidden="true">#</a></h2>
<p>You can lazy load content onto the page using the <code>x-load</code> directive:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">x-data</span> <span class="token attr-name">x-load</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/large-complex-chart<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>chart<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>This will issue a <code>GET</code> request to the server when the page loads, or as soon as this element is inserted into the DOM.</p>
<p>You can also specify a delay when loading content:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">x-data</span> <span class="token attr-name">x-load.600ms</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/progress<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>File progress:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>progress</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>70<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>70%<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>progress</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>This works great in situations where you may need to continuously poll the server for info on long running processes. See the <a href="/alpine-ajax/examples/progress-bar">Progress Bar</a> example for a more complete demonstration.</p>
<p><code>x-load</code> can also listen for events before loading content. Check out this markup for a list of comments:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">x-data</span> <span class="token attr-name"><span class="token namespace">x-load:</span>comment_added</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/comments<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comments<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code></pre>
<p>The comment list will listen for an event named <code>comment_added</code> to trigger on the root <code>window</code> object. When the <code>comment_added</code> event is triggered a <code>GET</code> request is issued to <code>/comments</code> and the comments list is reloaded with a fresh list of comments.</p>
<p>Alpine makes it easy to dispatch events from any component using the <code>$dispatch</code> magic helper. You can trigger the <code>comment_added</code> event in the previous example on a successful form submission like this:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">x-data</span> <span class="token attr-name">x-ajax</span> <span class="token attr-name"><span class="token namespace">@ajax:</span>success</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$dispatch('comment_added')<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/comments/new<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
<p>or, you can decouple your form dependencies by triggering the event in a server response like this:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">x-init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$dispatch('comment_added')<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>
<p>Combining <code>x-load</code> with events sent from the server provides a powerful pattern you can use to control dependencies and interactions between desparate parts of your interface. Instead of updating multiple pieces of a complex page in a singe request, include a single event <code>script</code> in any server response and elements on the page will handle updating their own content independently.</p>
</main>



</body>
</html>